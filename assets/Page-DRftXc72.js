import{u as w,r as t,j as e}from"./index-6PrkU4P9.js";import{a as y}from"./axios-B4uVmeYG.js";import{L as k,F as p,f as j,a as N,B as v}from"./Logo-DShtBms2.js";import{I as h}from"./Input-DKdcVR1f.js";const L=()=>{const n=w(),[r,l]=t.useState({email:"",password:"",rememberMe:!1,showPassword:!1}),[d,m]=t.useState(""),[i,x]=t.useState(""),[u,c]=t.useState(""),[b,g]=t.useState(!1);t.useEffect(()=>{(localStorage.getItem("token")||sessionStorage.getItem("token"))&&(g(!0),n("/",{replace:!0}))},[n]);const f=async a=>{a.preventDefault(),m(""),x(""),c("");try{const s=await y.post("http://122.52.132.239/Kodegoapi/public/index.php/api/login",r,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||sessionStorage.getItem("token")}`}});console.log("Login successful",s),s.data.token&&(r.rememberMe?localStorage.setItem("token",s.data.token):sessionStorage.setItem("token",s.data.token),g(!0),n("/",{replace:!0}))}catch(s){if(console.error("Login error",s),console.log(s.response),s.response){const o=s.response.data.errors;o?(o.email&&m(o.email[0]),o.password&&x(o.password[0])):c(s.response.data.message||"Something went wrong. Please try again.")}else c("Network error. Please try again later.")}};return b?null:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"#",className:"flex items-center justify-center text-3xl font-bold text-gray-900 dark:text-white",children:e.jsx(k,{})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 dark:border-gray-700 rounded-lg shadow-lg p-8",children:[e.jsx("h2",{className:"text-center text-2xl font-bold text-gray-900 dark:text-white",children:"Sign in to your account"}),u&&e.jsx("p",{className:"text-red-500 text-center mt-4",children:u}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your email"}),e.jsx(h,{id:"email",name:"email",className:`mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white ${d?"border-red-500":r.email?"border-green-500":"border-blue-300"}`,autoComplete:"email",value:r.email,onChange:a=>l({...r,email:a.target.value}),placeholder:"email@example.com"}),d&&e.jsx("p",{className:"text-red-500 text-sm",children:d})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",className:`mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white ${i?"border-red-500":r.password?"border-green-500":"border-blue-300"}`,name:"password",type:r.showPassword?"text":"password",autoComplete:"current-password",value:r.password,onChange:a=>l({...r,password:a.target.value}),placeholder:"Password"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer",onClick:()=>l({...r,showPassword:!r.showPassword}),children:r.showPassword?e.jsx(p,{icon:j,className:"hover:text-pink-700"}):e.jsx(p,{icon:N,className:"hover:text-pink-700"})})]}),i&&e.jsx("p",{className:"text-red-500 text-sm",children:i})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.rememberMe,onChange:a=>l({...r,rememberMe:a.target.checked})}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx(v,{className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Login"})})]})]})]})})};export{L as default};
